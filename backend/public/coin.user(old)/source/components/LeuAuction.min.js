function GetBidUpdate(n) { var t = $(".div-lot[PK_ID='" + n + "']").attr("A_TYPE");
    $.ajax({ type: "POST", url: "/source/components/LeuService.asmx/GetBidUpdate", data: "{intLotID:'" + n + "', A_TYPE:'" + t + "', UID:'" + $("#hfUID").val() + "'}", dataType: "json", contentType: "application/json; charset=utf-8", success: function(t) { UpdateLot(t.d, n) }, error: function(n) { console.log(n) } }) }

function GetBidsUpdate(n) { var t = $(".div-lot[PK_ID='" + n[0] + "']").attr("A_TYPE");
    n.length > 0 && $.ajax({ type: "POST", url: "/source/components/LeuService.asmx/GetBidsUpdate", data: "{strLots:'" + n + "', A_TYPE:'" + t + "', UID:'" + $("#hfUID").val() + "'}", dataType: "json", contentType: "application/json; charset=utf-8", success: function(n) { var t = JSON.parse(n.d); for (var i in t) UpdateLot(JSON.stringify(t[i]), t[i].ID) }, error: function(n) { console.log(n) } }) }

function UpdateTime(n) { var e = n.attr("PK_ID"),
        u = moment($("#hfNow").val()),
        f = moment(n.attr("T_L")),
        t = moment.duration(f.diff(u)),
        i = "",
        r;
    u <= f ? (t.months() > 0 ? (r = t.as("days").toString(), r = r.substring(0, r.indexOf(".")), i = r + " d " + t.hours() + " h " + t.minutes() + " min " + t.seconds() + " sec", OpenLot(i, n)) : t.days() > 0 ? (i = t.days() + " d " + t.hours() + " h " + t.minutes() + " min " + t.seconds() + " sec", OpenLot(i, n)) : t.hours() > 0 ? (i = t.hours() + " h " + t.minutes() + " min " + t.seconds() + " sec", OpenLot(i, n)) : t.minutes() > 0 ? (i = t.minutes() + " min " + t.seconds() + " sec", OpenLot(i, n)) : t.seconds() > 0 ? (i = t.seconds() + " sec", OpenLot(i, n)) : (n.attr("P", !0), CloseLot(n)), f.diff(u, "seconds") < 301 && f.diff(u, "seconds") > 0 && n.addClass("red")) : (n.attr("C") === "false" && n.attr("P", !0), CloseLot(n)) }

function CloseLot(n) { var t = n.attr("PK_ID"),
        i = n.data("withdrawn");
    n.removeClass("red");
    i === !1 ? ($(".bid-amount[PK_ID='" + t + "']").remove(), $(".btn-bid[PK_ID='" + t + "']").remove(), $("#hfAuctionType").val() !== "1" && $(".div-currentbidtitle[PK_ID='" + t + "']").html($("#hfHammer").val()), $(".div-bidincrement[PK_ID='" + t + "']").html($("#hfClosed").val()), $(".div-minimumbid[PK_ID='" + t + "']").html($("#hfClosed").val()), n.html("<b>" + $("#hfClosed").val() + "<\/b>")) : ($(".bid-amount[PK_ID='" + t + "']").remove(), $(".btn-bid[PK_ID='" + t + "']").remove(), $("#hfAuctionType").val() !== "1" && $(".div-currentbidtitle[PK_ID='" + t + "']").html($("#hfHammer").val()), $(".div-bidincrement[PK_ID='" + t + "']").html($("#hfWithdrawn").val()), $(".div-minimumbid[PK_ID='" + t + "']").html($("#hfWithdrawn").val()), n.html("<b>" + $("#hfClosed").val() + "<\/b>")) }

function OpenLot(n, t) { t.html(n);
    t.attr("C", !1);
    t.attr("P", !1) }

function toggleDescription(n) { $("div[PK_ID=" + n + "]").slideToggle("slow", "swing", function() { var t = $("a[PK_ID = " + n + "] > img").attr("src");
        $("a[PK_ID = " + n + "] > img").attr("src", t === "/source/images/svg/arrow_down.svg" ? "/source/images/svg/arrow_up.svg" : "/source/images/svg/arrow_down.svg") }) }

function UpdateLot(n, t) { var r = JSON.parse(n),
        u = r.C,
        o = $(".time-left[PK_ID='" + t + "']").attr("C"),
        s = $(".time-left[PK_ID='" + t + "']").attr("P"),
        h = $(".time-left[PK_ID='" + t + "']").data("withdrawn"),
        f, e, i;
    h === !1 ? (u = u === 0 ? $("#hfNoBids").val() : u + " CHF", $(".div-currentbid[PK_ID='" + t + "']").html(u), f = r.O, e = parseInt(r.Y) || 0, e > 0 && ($(".div-mybidline[PK_ID='" + t + "']").show(), f === "mybid-green" ? ($(".div-currentbidtitle[PK_ID='" + t + "']").removeClass("mybid-red"), $(".div-currentbid[PK_ID='" + t + "']").removeClass("mybid-red")) : ($(".div-currentbidtitle[PK_ID='" + t + "']").removeClass("mybid-green"), $(".div-currentbid[PK_ID='" + t + "']").removeClass("mybid-green")), $(".div-currentbidtitle[PK_ID='" + t + "']").addClass(f), $(".div-currentbid[PK_ID='" + t + "']").addClass(f), $(".div-mybid[PK_ID='" + t + "']").html(e + " CHF")), i = r.N, i = i === 0 ? $("#hfNoBids").val() : i === 1 ? i + " " + $("#hfBid").val() : i + " " + $("#hfBids").val(), $(".div-numberofbids[PK_ID='" + t + "']").html(i), o === "false" && s === "false" && ($(".div-bidincrement[PK_ID='" + t + "']").html(r.B + " CHF"), $(".div-minimumbid[PK_ID='" + t + "']").html(r.M + " CHF"))) : ($(".div-currentbid[PK_ID='" + t + "']").html($("#hfWithdrawn").val()), $(".div-bidincrement[PK_ID='" + t + "']").html($("#hfWithdrawn").val()), $(".div-minimumbid[PK_ID='" + t + "']").html($("#hfWithdrawn").val())) }

function ProcessBid(n, t) { var u = $("#hfUID").val(),
        i = n.attr("PK_ID"),
        f = n.attr("A_TYPE"),
        r = $(".bid-amount[PK_ID='" + i + "']").val(),
        e = r;
    r = parseInt(r) || 0;
    u !== "" && u !== "0" ? r > 0 && e % 1 == 0 && r.toString().length < 10 ? (n.attr("disabled", !0), $.when(Bid(u, i, r, f)).then(function(t) { n.attr("disabled", !1); var r = JSON.parse(t.d);
        r.Code === "OFFSET" && $(".div-offsettext[PK_ID='" + i + "']").html($("#hfCurrentBidText").val() + ": " + r.C + " CHF " + $("#hfMinimumBidText").val() + " " + r.M + " CHF");
        $(".a-" + r.Code + " [PK_ID='" + i + "']").alert();
        $(".a-" + r.Code + "[PK_ID='" + i + "']").slideDown(200).fadeTo(3e3, 500).slideUp(500, function() { $(".a-" + r.Code + "[PK_ID='" + i + "']").slideUp(500);
            $(".a-" + r.Code + "[PK_ID='" + i + "']").clearQueue();
            $(".a-" + r.Code + "[PK_ID='" + i + "']").stop() });
        $(".bid-amount[PK_ID='" + i + "']").val("");
        UpdateLot(t.d, i) })) : ($(".a-AMOUNT[PK_ID='" + i + "']").alert(), $(".a-AMOUNT[PK_ID='" + i + "']").slideDown(200).fadeTo(3e3, 500).slideUp(500, function() { $(".a-AMOUNT[PK_ID='" + i + "']").slideUp(500);
        $(".a-AMOUNT[PK_ID='" + i + "']").clearQueue();
        $(".a-AMOUNT[PK_ID='" + i + "']").stop() }), $(".bid-amount[PK_ID='" + i + "']").css("border", "2px solid #a94442"), $({ alpha: 1 }).animate({ alpha: 0 }, { duration: 3e3, step: function() { $(".bid-amount[PK_ID='" + i + "']").css("border-color", "rgba(169,68,66," + this.alpha + ")") } })) : ($("#mLogin").attr(t, i), $("#mLogin").modal()) }

function Bid(n, t, i, r) { return $.ajax({ type: "POST", url: "/source/components/LeuService.asmx/Bid", data: "{UID:'" + n + "', PK_ID:'" + t + "', intBid:'" + i + "', A_TYPE:'" + r + "', CurrentCulture:'" + $("#hfCC").val() + "'}", dataType: "json", contentType: "application/json; charset=utf-8", success: function(n) { return n.d }, error: function(n) { console.log(n) } }) }

function Watch(n, t) { return $.ajax({ type: "POST", url: "/source/components/LeuService.asmx/SetWatchlist", data: "{intLotID:'" + t + "', UID:'" + n + "'}", dataType: "json", contentType: "application/json; charset=utf-8", success: function(n) { return n.d }, error: function(n) { console.log(n) } }) } $(document).ready(function() { $(document).on("click", ".img-watchlist", function() { var t = $("#hfUID").val(),
            n = $(this).attr("PK_ID");
        t !== "" && t !== "0" ? $.when(Watch(t, n)).then(function(t) { t.d === !0 ? ($("img[PK_ID='" + n + "']").removeClass("outline"), $("img[PK_ID='" + n + "']").attr("src", "/source/images/svg/icon_watchlist_outline-filled.svg")) : ($("img[PK_ID='" + n + "']").addClass("outline"), $("img[PK_ID='" + n + "']").attr("src", "/source/images/svg/icon_watchlist_outline.svg")) }) : ($("#mLogin").attr("WATCHLIST", n), $("#mLogin").modal()) });
    $(document).on("mouseover", ".img-watchlist", function() { var n = $(this).attr("PK_ID");
        $("img[PK_ID='" + n + "']").attr("src", $("img[PK_ID='" + n + "']").hasClass("outline") === !0 ? "/source/images/svg/icon_watchlist_outline-filled.svg" : "/source/images/svg/icon_watchlist_outline-filled.svg") });
    $(document).on("mouseout", ".img-watchlist", function() { var n = $(this).attr("PK_ID");
        $("img[PK_ID='" + n + "']").attr("src", $("img[PK_ID='" + n + "']").hasClass("outline") === !0 ? "/source/images/svg/icon_watchlist_outline.svg" : "/source/images/svg/icon_watchlist_outline-filled.svg") });
    $(document).on("click", ".btn-bid", function(n) { n.preventDefault();
        ProcessBid($(this), "PK_ID") });
    $(document).on("click", ".btn-lotbid", function(n) { n.preventDefault();
        ProcessBid($(this), "LOT") });
    setInterval(function() { if ($("html").hasClass("fancybox-enabled") === !1) { var n = [];
            $(".viw-in").each(function() {
                ($(this).attr("C") === "false" || $(this).attr("P") === "true") && n.length < 6 && n.push($(this).attr("PK_ID")) });
            $.active < 1 && GetBidsUpdate(n) } }, 2e3) });